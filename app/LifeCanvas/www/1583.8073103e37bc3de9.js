"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1583],{6521:(P,f,i)=>{i.d(f,{GW:()=>m,dk:()=>h,oK:()=>o});var o=function(l){return l.Prompt="PROMPT",l.Camera="CAMERA",l.Photos="PHOTOS",l}(o||{}),m=function(l){return l.Rear="REAR",l.Front="FRONT",l}(m||{}),h=function(l){return l.Uri="uri",l.Base64="base64",l.DataUrl="dataUrl",l}(h||{})},1583:(P,f,i)=>{i.r(f),i.d(f,{Tab3PageModule:()=>A});var o=i(8521),m=i(2228),h=i(557),l=i(4977),T=i(4230),p=i(7791),y=i(7557),b=i(6521);const Z=(0,y.fo)("Camera",{web:()=>i.e(4952).then(i.bind(i,4952)).then(e=>new e.CameraWeb)});var t=i(2687),g=i(6712),v=i(9317);let I=(()=>{var e;class c{constructor(){var n=this;this.addImage=function(){var a=(0,p.Z)(function*(s){let d=yield n.loadImageJson();if(d){let u=parseInt(v.Fp(d,function(S){return S.id}).id);u++,d.push({id:u,imagePath:s})}else d=[{id:0,imagePath:s}];yield g.fy.writeFile({path:"images.json",data:JSON.stringify(d),directory:g.tP.External,encoding:g.ez.UTF8})});return function(s){return a.apply(this,arguments)}}(),this.loadImageJson=(0,p.Z)(function*(){try{const a=yield g.fy.readFile({path:"images.json",directory:g.tP.External,encoding:g.ez.UTF8});return JSON.parse(a.data.toString())}catch{return null}}),this.deleteImage=function(){var a=(0,p.Z)(function*(s){var d=yield n.loadImageJson();d=v.d1(d,function(u){return u.id==s});try{yield g.fy.writeFile({path:"images.json",data:JSON.stringify(d),directory:g.tP.External,encoding:g.ez.UTF8})}catch(u){console.error(u)}});return function(s){return a.apply(this,arguments)}}()}}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),c})();function x(e,c){if(1&e){const r=t.EpF();t.TgZ(0,"ion-col",8)(1,"ion-button",9),t.NdJ("click",function(){const s=t.CHM(r).$implicit,d=t.oxw();return t.KtG(d.setModalImage(s))}),t._UZ(2,"ion-img",10),t.qZA()()}if(2&e){const r=c.$implicit;t.xp6(2),t.Q6J("src",r.imagePath)}}function J(e,c){if(1&e){const r=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Image Preview"),t.qZA(),t.TgZ(4,"ion-buttons",11)(5,"ion-button",12),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.close())}),t._UZ(6,"ion-icon",13),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-card")(9,"ion-card-content")(10,"ion-list")(11,"ion-item"),t._UZ(12,"ion-img",10),t.TgZ(13,"ion-label",14),t.NdJ("click",function(){t.CHM(r);const a=t.oxw();return t.KtG(a.deleteImage(a.imageModal.id))}),t._uU(14,"Delete"),t.qZA()()()()()()}if(2&e){const r=t.oxw();t.xp6(5),t.Q6J("strong",!0),t.xp6(7),t.Q6J("src",r.imageModal.imagePath)}}const M=[{path:"",component:(()=>{var e;class c{constructor(n){this.imageService=n}ngOnInit(){this.gallery=this.imageService.loadImageJson()}takePhoto(){var n=this;return(0,p.Z)(function*(){const a=yield Z.getPhoto({quality:100,allowEditing:!1,resultType:b.dk.Uri});yield n.imageService.addImage(a.webPath),n.gallery=n.imageService.loadImageJson()})()}close(){this.modal.dismiss(null,"cancel")}setModalImage(n){this.imageModal=n,this.modal.present()}deleteImage(n){this.imageService.deleteImage(n).then(()=>{this.gallery=this.imageService.loadImageJson(),this.close()})}}return(e=c).\u0275fac=function(n){return new(n||e)(t.Y36(I))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tab3"]],viewQuery:function(n,a){if(1&n&&t.Gf(o.ki,5),2&n){let s;t.iGM(s=t.CRH())&&(a.modal=s.first)}},decls:20,vars:3,consts:[[1,"ion-no-border","drop-shadow"],["slot","start"],[1,"ion-no-margin"],["size","4",4,"ngFor","ngForOf"],["slot","fixed","vertical","bottom","horizontal","end"],[3,"click"],["name","add"],["trigger","open-modal"],["size","4"],["fill","outline","id","open-modal","expand","block",1,"ion-no-padding",3,"click"],[3,"src"],["slot","end"],[3,"strong","click"],["size","large","name","close"],["expand","block",3,"click"]],template:function(n,a){1&n&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-grid",2)(5,"ion-title"),t._uU(6,"Media"),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"ion-card")(9,"ion-card-content")(10,"ion-list")(11,"ion-item")(12,"ion-row"),t.YNc(13,x,3,1,"ion-col",3),t.ALo(14,"async"),t.qZA()()()()(),t.TgZ(15,"ion-fab",4)(16,"ion-fab-button",5),t.NdJ("click",function(){return a.takePhoto()}),t._UZ(17,"ion-icon",6),t.qZA()()(),t.TgZ(18,"ion-modal",7),t.YNc(19,J,15,2,"ng-template"),t.qZA()),2&n&&(t.xp6(13),t.Q6J("ngForOf",t.lcZ(14,1,a.gallery)))},dependencies:[o.YG,o.Sm,o.PM,o.FN,o.wI,o.W2,o.IJ,o.W4,o.jY,o.Gu,o.gu,o.Xz,o.Ie,o.Q$,o.q_,o.fG,o.Nd,o.wd,o.sr,o.ki,m.sg,m.Ov]}),c})()}];let F=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[T.Bz.forChild(M),T.Bz]}),c})(),A=(()=>{var e;class c{}return(e=c).\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[o.Pc,m.ez,h.u5,l.e,F]}),c})()}}]);